<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:GestaoChamadosAI_MAUI.ViewModels"
             xmlns:behaviors="clr-namespace:GestaoChamadosAI_MAUI.Behaviors"
             x:Class="GestaoChamadosAI_MAUI.Views.FeedbackIAPage"
             x:DataType="vm:FeedbackIAViewModel"
             Title="Resposta da IA"
             BackgroundColor="#90000000">

    <Grid RowDefinitions="Auto,*">
        <!-- Logo Header -->
        <Grid Grid.Row="0" BackgroundColor="{StaticResource Primary}" Padding="20,15,20,15">
            <Image Source="logo.png" WidthRequest="35" HeightRequest="35" HorizontalOptions="Start" VerticalOptions="Center"/>
        </Grid>

        <ScrollView Grid.Row="1">
        <Frame Margin="15"
               Padding="20"
               CornerRadius="15"
               HasShadow="True"
               BackgroundColor="White"
               VerticalOptions="Start"
               HorizontalOptions="Fill">
            
            <Frame.Shadow>
                <Shadow Brush="Black" Opacity="0.4" Radius="25" Offset="0,8" />
            </Frame.Shadow>
            
            <VerticalStackLayout Spacing="25">
                
                <!-- CabeÃ§alho simples -->
                <VerticalStackLayout Spacing="12">
                    <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
                        <Label Text="ðŸ¤–" FontSize="32"/>
                        <Label Text="Resposta AutomÃ¡tica da IA"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Gray900}"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    <Label Text="AnÃ¡lise instantÃ¢nea do seu chamado"
                           FontSize="13"
                           TextColor="{StaticResource Gray600}"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center"/>
                    <BoxView HeightRequest="2" 
                             BackgroundColor="{StaticResource Primary}"
                             Opacity="0.3"
                             Margin="0,8,0,0"/>
                </VerticalStackLayout>

                <!-- ConteÃºdo -->
                <VerticalStackLayout Spacing="20">
                    
                    <!-- InformaÃ§Ãµes do Chamado -->
                    <Frame Padding="16" 
                           CornerRadius="12"
                           BackgroundColor="{StaticResource Gray50}"
                           BorderColor="{StaticResource Gray200}"
                           HasShadow="False">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="ðŸ“‹ Seu Chamado"
                                   FontSize="12"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource Primary}"
                                   Opacity="0.8"/>
                            <Label Text="{Binding Titulo}"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource Gray900}"/>
                            <BoxView HeightRequest="1" 
                                     BackgroundColor="{StaticResource Gray200}"
                                     Margin="0,4"/>
                            <Label Text="{Binding Descricao}"
                                   FontSize="14"
                                   TextColor="{StaticResource Gray700}"
                                   LineBreakMode="WordWrap"
                                   MaxLines="3"/>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Resposta da IA com destaque -->
                    <Frame Padding="16"
                           CornerRadius="12"
                           BackgroundColor="{StaticResource Info}"
                           HasShadow="True">
                        <VerticalStackLayout Spacing="10">
                            <HorizontalStackLayout Spacing="8">
                                <Label Text="ðŸ’¡" FontSize="18"/>
                                <Label Text="SoluÃ§Ã£o Sugerida"
                                       FontSize="15"
                                       FontAttributes="Bold"
                                       TextColor="White"
                                       VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                            <BoxView HeightRequest="1" 
                                     BackgroundColor="White"
                                     Opacity="0.3"/>
                            <Label Text="{Binding RespostaIA}"
                                   FontSize="14"
                                   TextColor="White"
                                   LineBreakMode="WordWrap"/>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Pergunta -->
                    <VerticalStackLayout Spacing="6">
                        <Label Text="Essa soluÃ§Ã£o resolveu seu problema?"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Gray900}"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"/>
                        <Label Text="Sua resposta nos ajuda a melhorar! ðŸŽ¯"
                               FontSize="12"
                               TextColor="{StaticResource Gray600}"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>

                </VerticalStackLayout>

                <!-- BotÃµes - RESPONSIVO -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                    <Grid.Behaviors>
                        <behaviors:ResponsiveGridBehavior Columns="2"/>
                    </Grid.Behaviors>
                    
                    <Button Grid.Column="0"
                            Text="âŒ NÃ£o Resolveu"
                            Command="{Binding NaoResolveuCommand}"
                            BackgroundColor="{StaticResource Danger}"
                            TextColor="White"
                            HeightRequest="50"
                            FontSize="15"
                            FontAttributes="Bold"
                            CornerRadius="12">
                        <Button.Shadow>
                            <Shadow Brush="{StaticResource Danger}" Opacity="0.3" Radius="10" Offset="0,4" />
                        </Button.Shadow>
                    </Button>

                    <Button Grid.Column="1"
                            Text="âœ… Resolveu!"
                            Command="{Binding ResolveuCommand}"
                            BackgroundColor="{StaticResource Success}"
                            TextColor="White"
                            HeightRequest="50"
                            FontSize="15"
                            FontAttributes="Bold"
                            CornerRadius="12">
                        <Button.Shadow>
                            <Shadow Brush="{StaticResource Success}" Opacity="0.3" Radius="10" Offset="0,4" />
                        </Button.Shadow>
                    </Button>
                </Grid>

                <!-- Loading -->
                <Grid IsVisible="{Binding IsLoading}"
                      BackgroundColor="#DD000000"
                      AbsoluteLayout.LayoutBounds="0,0,1,1"
                      AbsoluteLayout.LayoutFlags="All">
                    <Frame Padding="25"
                           CornerRadius="16"
                           BackgroundColor="White"
                           HasShadow="True"
                           VerticalOptions="Center"
                           HorizontalOptions="Center">
                        <VerticalStackLayout Spacing="12">
                            <ActivityIndicator IsRunning="True"
                                             Color="{StaticResource Primary}"
                                             HeightRequest="40"
                                             WidthRequest="40"
                                             HorizontalOptions="Center"/>
                            <Label Text="Processando..."
                                   FontSize="14"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource Gray700}"
                                   HorizontalOptions="Center"/>
                        </VerticalStackLayout>
                    </Frame>
                </Grid>

            </VerticalStackLayout>
        </Frame>
        </ScrollView>
    </Grid>

</ContentPage>
